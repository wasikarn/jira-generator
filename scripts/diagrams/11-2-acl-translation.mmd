%%{init: {"flowchart": {"subGraphTitleMargin": {"top": 0, "bottom": 45}}} }%%
flowchart LR
    subgraph OLD["Legacy System"]
        direction TB
        O1["PlaySchedule"]
        O2["ScreenDeviceSchedule<br/>PlayComponent"]
        O3["ScreenDeviceSchedule<br/>PlayTimeSlotComponent"]
        O4["PlaylistAdvertisement"]
        O5["ExclusiveService"]
        O6["calculatePlaySchedules"]
    end

    subgraph ACL["Anti-Corruption Layer â€” Translation Boundary"]
        direction TB
        T1{{"PlaySchedule<br/>to ScreenScheduleItem"}}
        T2{{"3 Components<br/>to AdDecisioningService"}}
        T3{{"PlaylistAd<br/>to ScreenScheduleItem<br/>type: house"}}
        T4{{"ExclusiveService<br/>absorbed into<br/>InterruptController"}}
        T5{{"3500 lines<br/>to sequence i++"}}
    end

    subgraph NEW["New Architecture"]
        direction TB
        N1["ScreenSchedule"]
        N2["AdDecisioningService"]
        N3["ScreenScheduleItem"]
        N4["InterruptController"]
        N5["Dumb Renderer"]
    end

    O1 e1@--> T1 e5@--> N1
    O2 e2@--> T2 e6@--> N2
    O3 e7@--> T2
    O4 e8@--> T3 e9@--> N3
    O5 e3@--> T4 e10@--> N4
    O6 e4@--> T5 e11@--> N5
    e1@{ animation: slow }
    e2@{ animation: slow }
    e3@{ animation: slow }
    e4@{ animation: slow }
    e5@{ animation: fast }
    e6@{ animation: fast }
    e7@{ animation: slow }
    e8@{ animation: slow }
    e9@{ animation: fast }
    e10@{ animation: fast }
    e11@{ animation: fast }

    %% Subgraph styles
