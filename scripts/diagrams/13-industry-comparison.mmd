%%{init: {"flowchart": {"subGraphTitleMargin": {"top": 0, "bottom": 45}}} }%%
flowchart LR
    subgraph M1["**Model 1: Player-Side Rules**<br/>Broadsign, Xibo"]
        direction TB
        M1S["Server"] e1@-->|"rules + policies"| M1P["Player"]
        M1P -->|"builds own playlist"| M1P
        M1P e2@-->|"PoP reports"| M1S
    end

    subgraph M2["**Model 2: Server Pre-Generated**<br/>Signagelive, Scala"]
        direction TB
        M2S["Server"] e3@-->|"ordered playlist"| M2P["Player"]
        M2P -->|"plays sequence"| M2P
        M2P e4@-->|"PoP reports"| M2S
    end

    subgraph M3["**Model 3: Hybrid**<br/>Tathep Proposed"]
        direction TB
        M3S["Server"] e5@-->|"ordered sequence<br/>+ 3-tier cache"| M3P["Player"]
        M3P -->|"Dumb Renderer<br/>+ Interrupt Controller"| M3P
        M3P e6@-->|"PoP + idempotent sync"| M3S
    end

    e1@{ animation: slow }
    e2@{ animation: slow }
    e3@{ animation: slow }
    e4@{ animation: slow }
    e5@{ animation: slow }
    e6@{ animation: slow }

    style M1 fill:#e3f2fd,stroke:#1565C0
    style M2 fill:#fce4ec,stroke:#C62828
    style M3 fill:#e8f5e9,stroke:#2E7D32
