flowchart TD
    A["Cron (every 10 min)"] e1@--> B["PlayScheduleCalculate<br/>job (BullMQ)"]
    B e2@--> C["PlayScheduleCalculatePerScreen<br/>(per billboard)"]
    C e3@--> D["PlayScheduleFrequencyService<br/>(owner ads)"]
    C e4@--> E["PlaySchedulePeriodService<br/>(paid customer ads)"]
    D e5@--> F[("Create PlaySchedule<br/>rows in DB")]
    E e6@--> F
    F e7@--> G>"Pusher 'update-play-schedule'<br/>â†’ Player"]
    e1@{ animation: fast }
    e2@{ animation: fast }
    e3@{ animation: fast }
    e4@{ animation: fast }
    e5@{ animation: slow }
    e6@{ animation: slow }
    e7@{ animation: slow }
    style A fill:#cce5ff,stroke:#004085
    style F fill:#d4edda,stroke:#28a745
    style G fill:#fff3cd,stroke:#ffc107
