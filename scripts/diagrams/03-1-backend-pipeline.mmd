flowchart TD
    A["Cron (every 10 min)"] --> B["PlayScheduleCalculate<br/>job (BullMQ)"]
    B --> C["PlayScheduleCalculatePerScreen<br/>(per billboard)"]
    C --> D["PlayScheduleFrequencyService<br/>(owner ads)"]
    C --> E["PlaySchedulePeriodService<br/>(paid customer ads)"]
    D & E --> F[("Create PlaySchedule<br/>rows in DB")]
    F e1@--> G>"Pusher 'update-play-schedule'<br/>â†’ Player"]
    e1@{ animation: slow }
    style A fill:#cce5ff,stroke:#004085
    style F fill:#d4edda,stroke:#28a745
    style G fill:#fff3cd,stroke:#ffc107
