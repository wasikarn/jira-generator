<table data-layout="wide">
<colgroup><col style="width: 100px;" /><col style="width: 300px;" /></colgroup>
<tbody>
<tr><td><p><strong>Parent Guide</strong></p></td><td><p><a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/164167729">Redis Sorted Set Pattern</a> ¬∑ <a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/164167695">ADR: Redis Key-Value Design Convention</a></p></td></tr>
<tr><td><p><strong>Related Task</strong></p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3302">BEP-3302</a> ‚Äî Migrate CacheService to Bentocache</p></td></tr>
<tr><td><p><strong>Total Effort</strong></p></td><td><p><strong>30 SP</strong> (14 tickets: 4 Sorted Set + 10 Other Data Types)</p></td></tr>
<tr><td><p><strong>Source</strong></p></td><td><p><a href="https://redis.io/docs/latest/develop/data-types/">Redis Data Types Reference</a></p></td></tr>
</tbody>
</table>

<hr />
<h2>Overview</h2>
<p>‡∏à‡∏≤‡∏Å codebase audit ‡∏Ç‡∏≠‡∏á <code>tathep-platform-api</code> ‡∏û‡∏ö <strong>14 ‡∏à‡∏∏‡∏î</strong> ‡∏ó‡∏µ‡πà Redis data types ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÑ‡∏î‡πâ ‚Äî ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° 8 data types ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 19 types ‡∏ó‡∏µ‡πà Redis ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö</p>

<table data-layout="default">
<colgroup><col style="width: 140px;" /><col style="width: 60px;" /><col style="width: 60px;" /><col style="width: 340px;" /></colgroup>
<thead><tr>
<th><p><strong>Redis Data Type</strong></p></th>
<th><p><strong>‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß</strong></p></th>
<th><p><strong>‡πÉ‡∏´‡∏°‡πà</strong></p></th>
<th><p><strong>Use Cases</strong></p></th>
</tr></thead>
<tbody>
<tr><td><p>String (GET/SET/INCR)</p></td><td><p>‚úÖ</p></td><td><p>1</p></td><td><p>Cache, Rate Limit, Campaign Cost + <strong>KEYS‚ÜíSCAN fix</strong></p></td></tr>
<tr><td><p>Sorted Set (ZADD/ZCOUNT)</p></td><td><p>‚ö†Ô∏è 4 tickets</p></td><td><p>‚Äî</p></td><td><p>Rate limiter, schedule count, revenue ranking, cost TTL</p></td></tr>
<tr><td><p>Stream (XADD/XREAD)</p></td><td><p>‚úÖ</p></td><td><p>‚Äî</p></td><td><p>Video processing events (already implemented)</p></td></tr>
<tr><td><p>Hash (HSET/HINCRBY)</p></td><td><p>‚ùå</p></td><td><p>3</p></td><td><p>Notification unread, billboard metadata, analytics accumulation</p></td></tr>
<tr><td><p>Set (SADD/SMEMBERS)</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Multi-session management</p></td></tr>
<tr><td><p>List (LPUSH/LRANGE)</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Pusher log buffering</p></td></tr>
<tr><td><p>Geo (GEOADD/GEOSEARCH)</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Billboard proximity search</p></td></tr>
<tr><td><p>HyperLogLog (PFADD)</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Unique view counting</p></td></tr>
<tr><td><p>Bitmap (SETBIT)</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Daily active user tracking</p></td></tr>
<tr><td><p>Pub/Sub</p></td><td><p>‚ùå</p></td><td><p>1</p></td><td><p>Event-driven outbox trigger</p></td></tr>
</tbody>
</table>

<hr />
<h2>All Tickets (14)</h2>

<h3>Phase 1: Sorted Set Optimizations (4 tickets, 9 SP) ‚Äî existing</h3>
<table data-layout="wide">
<colgroup><col style="width: 30px;" /><col style="width: 80px;" /><col style="width: 300px;" /><col style="width: 40px;" /><col style="width: 80px;" /><col style="width: 100px;" /></colgroup>
<thead><tr>
<th><p><strong>#</strong></p></th>
<th><p><strong>Key</strong></p></th>
<th><p><strong>Summary</strong></p></th>
<th><p><strong>SP</strong></p></th>
<th><p><strong>Priority</strong></p></th>
<th><p><strong>Redis Type</strong></p></th>
</tr></thead>
<tbody>
<tr><td><p>1</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3314">BEP-3314</a></p></td><td><p>Rate Limiter Sliding Window (Lua script)</p></td><td><p>2</p></td><td><p>P1</p></td><td><p>Sorted Set + Lua</p></td></tr>
<tr><td><p>2</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3315">BEP-3315</a></p></td><td><p>PlaySchedule Frequency Count (ZCOUNT)</p></td><td><p>3</p></td><td><p>P2</p></td><td><p>Sorted Set</p></td></tr>
<tr><td><p>3</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3316">BEP-3316</a></p></td><td><p>Billboard Revenue Ranking (ZINCRBY)</p></td><td><p>2</p></td><td><p>P2</p></td><td><p>Sorted Set</p></td></tr>
<tr><td><p>4</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3317">BEP-3317</a></p></td><td><p>Campaign Cost TTL + Per-Campaign Lock</p></td><td><p>2</p></td><td><p>P1</p></td><td><p>String (EXPIRE fix)</p></td></tr>
</tbody>
</table>

<h3>Phase 2: Other Data Types (10 tickets, 21 SP) ‚Äî new</h3>
<table data-layout="wide">
<colgroup><col style="width: 30px;" /><col style="width: 80px;" /><col style="width: 300px;" /><col style="width: 40px;" /><col style="width: 80px;" /><col style="width: 100px;" /></colgroup>
<thead><tr>
<th><p><strong>#</strong></p></th>
<th><p><strong>Key</strong></p></th>
<th><p><strong>Summary</strong></p></th>
<th><p><strong>SP</strong></p></th>
<th><p><strong>Priority</strong></p></th>
<th><p><strong>Redis Type</strong></p></th>
</tr></thead>
<tbody>
<tr><td><p>5</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3320">BEP-3320</a></p></td><td><p>Fix CacheService KEYS ‚Üí SCAN (production blocking bug)</p></td><td><p>1</p></td><td><p>üî¥ P0</p></td><td><p>String (SCAN)</p></td></tr>
<tr><td><p>6</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3321">BEP-3321</a></p></td><td><p>Notification Unread Count Cache (HINCRBY)</p></td><td><p>3</p></td><td><p>P1</p></td><td><p>Hash</p></td></tr>
<tr><td><p>7</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3322">BEP-3322</a></p></td><td><p>Multi-Session Management (SADD/SREM)</p></td><td><p>2</p></td><td><p>P2</p></td><td><p>Set</p></td></tr>
<tr><td><p>8</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3323">BEP-3323</a></p></td><td><p>Billboard Proximity Search (GEOADD/GEOSEARCH)</p></td><td><p>3</p></td><td><p>P2</p></td><td><p>Geo</p></td></tr>
<tr><td><p>9</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3324">BEP-3324</a></p></td><td><p>Unique View Counting (PFADD/PFCOUNT)</p></td><td><p>2</p></td><td><p>P3</p></td><td><p>HyperLogLog</p></td></tr>
<tr><td><p>10</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3325">BEP-3325</a></p></td><td><p>Pusher Log Buffering (LPUSH + Batch Flush)</p></td><td><p>2</p></td><td><p>P3</p></td><td><p>List</p></td></tr>
<tr><td><p>11</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3326">BEP-3326</a></p></td><td><p>Outbox Polling ‚Üí Pub/Sub Trigger</p></td><td><p>2</p></td><td><p>P3</p></td><td><p>Pub/Sub</p></td></tr>
<tr><td><p>12</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3327">BEP-3327</a></p></td><td><p>Daily Active User Tracking (SETBIT/BITCOUNT)</p></td><td><p>1</p></td><td><p>P3</p></td><td><p>Bitmap</p></td></tr>
<tr><td><p>13</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3328">BEP-3328</a></p></td><td><p>Billboard Metadata Cache (HSET/HGET)</p></td><td><p>1</p></td><td><p>P3</p></td><td><p>Hash</p></td></tr>
<tr><td><p>14</p></td><td><p><a href="https://{{JIRA_SITE}}/browse/BEP-3329">BEP-3329</a></p></td><td><p>Analytics Accumulation (HINCRBY + Daily Flush)</p></td><td><p>3</p></td><td><p>P3</p></td><td><p>Hash</p></td></tr>
</tbody>
</table>

<hr />
<h2>Implementation Priority</h2>

<table data-layout="default">
<colgroup><col style="width: 80px;" /><col style="width: 250px;" /><col style="width: 270px;" /></colgroup>
<thead><tr>
<th><p><strong>Priority</strong></p></th>
<th><p><strong>Tickets</strong></p></th>
<th><p><strong>Reason</strong></p></th>
</tr></thead>
<tbody>
<tr><td><p>üî¥ <strong>P0</strong></p></td><td><p>BEP-3320 (KEYS‚ÜíSCAN)</p></td><td><p>Production bug ‚Äî KEYS blocks Redis event loop</p></td></tr>
<tr><td><p>üü† <strong>P1</strong></p></td><td><p>BEP-3314, BEP-3317, BEP-3321</p></td><td><p>Security (rate limiter) + memory leak + high DB load (notification)</p></td></tr>
<tr><td><p>üü° <strong>P2</strong></p></td><td><p>BEP-3315, BEP-3316, BEP-3322, BEP-3323</p></td><td><p>Performance + new capabilities (proximity, sessions)</p></td></tr>
<tr><td><p>üü¢ <strong>P3</strong></p></td><td><p>BEP-3324-3329</p></td><td><p>Nice-to-have analytics, buffering, DAU</p></td></tr>
</tbody>
</table>

<hr />
<h2>Relationship to BEP-3302 (Bentocache Migration)</h2>
<p>‡∏ó‡∏±‡πâ‡∏á 14 tickets ‡πÉ‡∏ä‡πâ <strong>ioredis ‡∏ï‡∏£‡∏á</strong> (specialized Redis commands) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Bentocache:</p>
<ul>
<li><strong>Bentocache</strong> = key-value cache abstraction (getOrSet, tags, grace period, stampede protection)</li>
<li><strong>ioredis direct</strong> = specialized data structures (ZADD, HINCRBY, GEOADD, PFADD, SETBIT, etc.)</li>
<li><strong>‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ</strong> ‚Äî share Redis connection ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô, ‡πÅ‡∏ö‡πà‡∏á scope ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</li>
</ul>
<p>‡∏î‡∏π <a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/164167729">parent guide</a> section 9.3 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö scope ‡πÅ‡∏ö‡πà‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Bentocache ‡∏Å‡∏±‡∏ö ioredis</p>

<hr />
<h2>Redis Data Types Not Used (Future Consideration)</h2>
<p>Data types ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï:</p>
<table data-layout="default">
<colgroup><col style="width: 140px;" /><col style="width: 460px;" /></colgroup>
<thead><tr>
<th><p><strong>Type</strong></p></th>
<th><p><strong>Potential Use Case</strong></p></th>
</tr></thead>
<tbody>
<tr><td><p>JSON</p></td><td><p>Complex nested objects ‚Äî ‡∏ñ‡πâ‡∏≤ Bentocache ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</p></td></tr>
<tr><td><p>Time Series</p></td><td><p>IoT-style metrics ‚Äî billboard sensor data, real-time monitoring</p></td></tr>
<tr><td><p>Bloom Filter</p></td><td><p>Duplicate detection ‚Äî check "user already collected this coupon?" without DB query</p></td></tr>
<tr><td><p>Top-K</p></td><td><p>Trending billboards ‚Äî approximate top-N without full aggregate</p></td></tr>
</tbody>
</table>

<hr />
<h2>References</h2>
<ul>
<li><a href="https://redis.io/docs/latest/develop/data-types/">Redis Data Types (Official Docs)</a></li>
<li><a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/164167729">Redis Sorted Set Pattern Guide (Parent)</a></li>
<li><a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/164167695">ADR: Redis Key-Value Design Convention</a></li>
<li><a href="https://{{JIRA_SITE}}/wiki/spaces/BEP/pages/165019651">Redis Sorted Set: 4 Optimization Tickets</a></li>
<li><a href="https://{{JIRA_SITE}}/browse/BEP-3302">BEP-3302: Bentocache Migration</a></li>
</ul>
